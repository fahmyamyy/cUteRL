<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>cUteRL</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/static/img/logo.png" rel="icon">
  <link href="/static/img/apple-touch-icon.png" rel="apple-touch-icon">

  <script src="/static/js/jQuery.js"></script>
  <script src="/static/js/sweetalert.js"></script>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Jost:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/static/vendor/aos/aos.css" rel="stylesheet">
  <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/static/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/static/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/static/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <link href="/static/css/style.css" rel="stylesheet">

</head>
<script>
  var target = window.location.href.split('/');

  $.ajax({
    url: 'http://localhost:5000/url/' + target[3],
    method: 'GET',
    headers: {
      "Content-Type": "application/json"
    },
    success: function (data) {
      // console.log(data)
      // return
      window.location = data.data.longUrl;
    },
    error: function (data) {
      Swal.fire({
        title: 'Hey!',
        text: "Your cute URL still available for used!",
        confirmButtonColor: '#3085d6',
        confirmButtonText: 'Get it now!',
        preConfirm: function () {
          $('html, body').animate({
            scrollTop: $("#footer").offset().top
          }, 800)
        },
      });
    }
  });
</script>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top ">
    <div class="container d-flex align-items-center">
      <h1 class="logo me-auto"><a href="#" onclick="home();">cUteRL</a></h1>
    </div>
  </header>

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex align-items-center">

    <div class="container">
      <div class="row">
        <div class="col-lg-6 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1"
          data-aos="fade-up" data-aos-delay="200">
          <h1>Got Looooong URL?</h1>
          <h2>No worries,<br>We will make your URL cuter!</h2>
          <div class="d-flex justify-content-center justify-content-lg-start">
            <a id="started" href="#" class="btn-get-started scrollto">Get Started</a>
            <a href="https://www.youtube.com/watch?v=jDDaplaOz7Q" class="glightbox btn-watch-video"><i
                class="bi bi-play-circle"></i><span>Watch Video</span></a>
          </div>
        </div>
        <div class="col-lg-6 order-1 order-lg-2 hero-img" data-aos="zoom-in" data-aos-delay="200">
          <img src="/static/img/hero-img.png" class="img-fluid animated" alt="">
        </div>
      </div>
    </div>

  </section><!-- End Hero -->


  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-newsletter">
      <div class="container my-5">
        <div class="row justify-content-center my-5">
          <div class="col-lg-8 my-1">
            <h4>Drop your Looooooong URL</h4>
            <div class="form-group">
              <h6 class="my-2 font-weight-bold">Long URL</h6>
              <input type="text" class="form-control" id="long"
                placeholder="Example: https://www.your-long-url-is-not-cute.com/make_it_cute.please">
              <label id="invalid-long" style="display: none; text-align: left !important;"
                class="font-weight-bold text-danger">Please fill your long URL</label>
            </div>
            <div class="form-group">
              <h6 class="my-2 font-weight-bold">Short URL</h6>
              <input type="text" class="form-control" id="short" placeholder="Example: MyCuteUrl">
            </div>
            <button id="reduce" class="mt-3 mb-5 btn btn-success">Reducio!</button>
            <div class="form-group">
              <h6 class="my-2 font-weight-bold">cUteRL</h6>
              <input type="text" class="form-control" id="preview" value="cuterl.com/" style="-moz-user-select: none;
              -webkit-user-select: none;
              -ms-user-select:none;
              user-select:none;
              -o-user-select:none;" unselectable="on" onselectstart="return false;" onmousedown="return false;"
                disabled>
            </div>
            <div class="row mt-3 mb-3">
              <button id="copy" style="display: none;" class="btn btn-primary">Copy URL</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-4 col-md-6 footer-contact">
            <h3>cuterl</h3>
            <p>
              A108 Adam Street <br>
              New York, NY 535022<br>
              United States
            </p>
          </div>
          <div class="col-lg-6 col-md-6 footer-contact"></div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Reach Me</h4>
            <div class="social-links mt-3">
              <!-- <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
              <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a> -->
              <a href="mailto:fahmy.malikk@gmail.com" class="instagram"><i class="bx bxl-gmail"></i></a>
              <a href="https://github.com/amyganzz" target="_blank" class="google-plus"><i
                  class="bx bxl-github"></i></a>
              <a href="https://www.linkedin.com/in/fahmy-malik-rabbani/" target="_blank" class="linkedin"><i
                  class="bx bxl-linkedin"></i></a>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="container footer-bottom clearfix">
      <div class="copyright">
        &copy; Copyright <strong><span>cUteRL</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Created by <a href="https://github.com/amyganzz">Znagyma</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <div id="preloader"></div>
  <a href="#" class="bg-primary back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="/static/vendor/aos/aos.js"></script>
  <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/static/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/static/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/static/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/static/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="/static/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="/static/js/main.js"></script>

</body>

</html>

<script>
  $(document).ready(function() {
    $('#short').val(target[3])
    $('#preview').val('cuterl.com/' + target[3])

    $('#short').on('input', function (e) {
      $('#preview').val('cuterl.com/' + e.target.value)
    });
  });


  $('#long').on('input', function (e) {
    $('#invalid-long').hide()
  });


  $('#reduce').on('click', function (e) {
    var long = $('#long').val()
    var short = $('#short').val()

    if (long == '') {
      $('#invalid-long').show();
    } else {

      var settings = {
        "url": "http://localhost:5000/url",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json"
        },
        "data": JSON.stringify({
          "shortUrl": short,
          "longUrl": long
        })
      };

      $.ajax({
        url: 'http://localhost:5000/url',
        method: 'POST',
        headers: {
          "Content-Type": "application/json"
        },
        data: JSON.stringify({
          "shortUrl": short,
          "longUrl": long
        }),
        success: function (data) {
          window.location = 'http://localhost:5000/cuterl/result/' + short;
        },
        error: function (data) {
          Swal.fire({
            title: 'Error!',
            icon: 'error',
            text: data.responseJSON.message,
            confirmButtonColor: '#3085d6',
            confirmButtonText: 'Okay'
          });
        }
      });
    }
  });

  $("#started").click(function () {
    $('html, body').animate({
      scrollTop: $("#footer").offset().top
    }, 800);
  });

  function home() {
    window.location = 'http://localhost:5000'
  }

</script>