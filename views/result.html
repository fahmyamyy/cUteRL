<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>cUteRL</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/static/img/logo.png" rel="icon">
  <link href="/static/img/apple-touch-icon.png" rel="apple-touch-icon">

  <script src="/static/js/jQuery.js"></script>
  <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
  <!-- <script src="/static/js/qrcode.js"></script> -->

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Jost:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/static/vendor/aos/aos.css" rel="stylesheet">
  <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/static/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/static/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/static/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <link href="/static/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" style="background: rgba(40, 58, 90, 0.9);
  background-color: rgba(40, 58, 90, 0.9);
  background-position-x: 0%;
  background-position-y: 0%;
  background-repeat: repeat;
  background-attachment: scroll;
  background-image: none;
  background-size: auto;
  background-origin: padding-box;
  background-clip: border-box;" class="fixed-top ">
    <div class="container d-flex align-items-center">
      <h1 class="logo me-auto"><a href="http://localhost:5000/cuterl">cUteRL</a></h1>
    </div>
  </header>

  <!-- ======= Hero Section ======= -->


  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-newsletter mt-4">
      <div class="container mb-4 mt-5">
        <div class="row justify-content-center">
          <div class="col-lg-8 mt-2">
            <h3>Here you are!</h3>
          </div>
        </div>
        <div class="row">
          <div class="col-6 my-4">

            <div class="row mt-5">
              <h4 class="text-left my-2 font-weight-bold">Long URL</h4>
              <h5 id="long" class="my-2 font-weight-bold"></h5>
            </div>
            <div class="row">
              <h4 class="my-2 font-weight-bold">cUteRL</h4>
              <h5 id="short" class="my-2 font-weight-bold"></h5>
            </div>
          </div>
          <div class="col-6 my-4 d-flex justify-content-center">
            <div id="qrcode"></div>
          </div>
        </div>




      </div>
    </div>

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-4 col-md-6 footer-contact">
            <h3>cuterl</h3>
            <p>
              A108 Adam Street <br>
              New York, NY 535022<br>
              United States
            </p>
          </div>
          <div class="col-lg-6 col-md-6 footer-contact"></div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Reach Me</h4>
            <div class="social-links mt-3">
              <!-- <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
              <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a> -->
              <a href="mailto:fahmy.malikk@gmail.com" class="instagram"><i class="bx bxl-gmail"></i></a>
              <a href="https://github.com/amyganzz" target="_blank" class="google-plus"><i
                  class="bx bxl-github"></i></a>
              <a href="https://www.linkedin.com/in/fahmy-malik-rabbani/" target="_blank" class="linkedin"><i
                  class="bx bxl-linkedin"></i></a>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="container footer-bottom clearfix">
      <div class="copyright">
        &copy; Copyright <strong><span>cUteRL</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/arsha-free-bootstrap-html-template-corporate/ -->
        Created by <a href="https://github.com/amyganzz">Znagyma</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <div id="preloader"></div>
  <a href="#" class="bg-primary back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="/static/vendor/aos/aos.js"></script>
  <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/static/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/static/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/static/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/static/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="/static/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="/static/js/main.js"></script>

</body>

</html>

<script>
  $('#short').on('input', function (e) {
    $('#preview').val('cuterl.com/' + e.target.value)
  });

  $('#long').on('input', function (e) {
    $('#invalid-long').hide()
  });

  // $('#short').on('change', function (e) {
  //   if (e.target.val == '') {
  //     alert('kosong tot')
  //   }
  // });

  $('#reduce').on('click', function (e) {
    var long = $('#long').val()
    var short = $('#short').val()

    var format = /[ `!@#$%^&*()\=\[\]{};':"\\|,.<>\/?~]/;
    if (format.test(short)) {
      //error
    }

    if (long == '') {
      $('#invalid-long').show();
    } else {

      var settings = {
        "url": "http://localhost:5000/url",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json"
        },
        "data": JSON.stringify({
          "shortUrl": short,
          "longUrl": long
        })
      };

      $.ajax(settings).done(function (response) {
        if (response.code == 200) {
          window.location = 'http://localhost:5000/cuterl/result';
        } else {

        }
      });
    }
  });

  var url = window.location.href.split('/');
  // console.log("http://localhost:5000/url/" + url[5])

  $(document).ready(function () {
    var settings = {
      "url": "http://localhost:5000/url/" + url[4],
      "method": "GET",
      "headers": {
        "Content-Type": "application/json"
      }
    };

    $.ajax(settings).done(function (response) {
      console.log(response)
      if (response.code == 406) {
        alert('aa')
      }
      if (response.code == 200) {
        console.log(response.data.shortUrl)
        $('#short').text('cuterl.com/' + response.data.shortUrl)
        $('#long').text(response.data.longUrl)
        const qrCode = new QRCodeStyling({
          width: 300,
          height: 300,
          type: "svg",
          // data: "https://www.facebook.com/",
          data: 'cuterl.com/' + response.data.shortUrl,
          image: "/static/img/logo.png",
          dotsOptions: {
            color: "#37517e",
            type: "extra-rounded"
          },
          backgroundOptions: {
            color: "#e9ebee",
          },
          imageOptions: {
            crossOrigin: "anonymous",
            margin: 20
          }
        });

        qrCode.append(document.getElementById("qrcode"));
        // qrCode.download({ name: "qr", extension: "png" });
      } else if (response.code == 406) {
        alert('as')
      }
    });
  })
  
  // qrCode.download({ name: "qr", extension: "svg" });




</script>